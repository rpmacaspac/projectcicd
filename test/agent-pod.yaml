apiVersion: v1
kind: Pod
metadata:
  name: kaniko
  namespace: devops-tools
spec:
  containers:
  - name: kaniko
    image: gcr.io/kaniko-project/executor:debug
    args: ["--context=git://github.com/rpmacaspac/projectcicd",
           "--context-sub-path=workspaces",
            "--destination=rpmacaspac/devops-toolkit:1.0.0"]
    volumeMounts:
        - name: kaniko-secret
          mountPath: /kaniko/.docker

  volumes:
        - name: kaniko-secret
          secret:
            secretName: regcred
            items:
                - key: .dockerconfigjson
                  path: config.json